<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kogan Payment</title>
    <link rel="stylesheet" href="payment.css" />
</head>
<body>
    <!--top header-->
        <header class="topbar">
            <div class="topbar-left">
                <p>Phone Number +61 123 456 789</p>
            </div>
            <div class="topbar-right">
                <a href="#">Live Chat</a>
                <a href="#">AUS ▾</a>
                <a href="#">English ▾</a>
            </div>
        </header>
        
        <!--main header 最顶上的白色部分-->
        <header class="main-header">
            <div class="top-row">
                <a href="index.html" class="logo-link">
                    <img src="image/Kogan.com_logo橙黑.png" alt="Logo" class="logo-img" />
                </a>
                
                <!--搜索条-->
                <div class="search-container">
                    <div class="search-box">
                        <img src="image/search_icon.svg" alt="Search Icon" class="search-icon" />
                        <input type="text" placeholder="Search in products" />
                    </div>
                    <button>Search</button>
                </div>


                <div class="icons-right">
                    <div class="icon-wrapper light">
                        <img src="image/Heart.png" alt="Wishlist" />
                    </div>
                    <div class="icon-wrapper orange">
                        <img src="image/Shopping cart.png" alt="Cart" class="cart-icon" />
                    </div>
                    
                    <div class="icon-wrapper yellow">
                        <img src="image/user.png" alt="User" />
                    </div>

                    <div class="welcome-text">
                        <span>Welcome!</span>
                        <strong>Sophia</strong>
                    </div>
                </div>


            <!--categories deals win clearance news-->
            <div class="bottom-row">
                <div class="menu-button">☰ Shop by Department ▾</div>
                <nav class="main-menu">
                    <a href="#">Deals ▾</a>
                    <a href="#">Win $200k ▾</a>
                    <a href="#">Clearance ▾</a>
                    <a href="#">News ▾</a>
                </nav>
            </div>
        </header>   
    
        <!--mobile version header-->
        <header class="mobile-header">
            <div class="mobile-header-top">
                <div class="menu-icon">☰</div>
                <a href="index.html" class="logo-link">
                    <img src="image/Kogan.com_logo橙黑.png" alt="Logo" class="logo-img" />
                </a>
                <div class="icons-right">
                    <div class="icon-wrapper orange">
                        <img src="image/Shopping cart.png" alt="Cart" class="cart-icon" />
                    </div>
                    <div class="icon-wrapper yellow">
                        <img src="image/user.png" alt="User" />
                    </div>
                    <div class="welcome-text">
                        <span>Welcome!</span>
                        <strong>Sophia</strong>
                    </div>
                </div>
            </div>

            <div class="mobile-search-container">
                <div class="search-box">
                    <img src="image/search_icon.svg" alt="Search Icon" class="search-icon" />
                    <input type="text" id="search-input-mobile" placeholder="Search in products" autocomplete="off" />
                    
                </div>
                <button id="search-btn-mobile">Search</button>
            </div>

            <nav class="mobile-main-menu">
                <div class="menu-item">
                    <img src="image/local_fire_department.svg" alt="Deals Icon" class="header-icon" />
                    Deals
                </div>
                <div class="menu-item">
                    <img src="image/flash_on.svg" alt="Win Icon" class="header-icon" />
                    Win $200k
                </div>
                <div class="menu-item">
                    <img src="image/Dollar sign.svg" alt="Clearance Icon" class="header-icon" />
                    Clearance
                </div>
                <div class="menu-item">
                    <img src="image/flash_on.svg" alt="News Icon" class="header-icon" />
                    News
                </div>
            </nav>

        </header>
    
    <div class="Page">
        <div class="checkout-header">
            <h1>Checkout</h1>
        </div>
        <div class="container">
            <!--左侧-->
            <section class="checkout-left">
                <!--Express Checkout-->
                <div class="express-checkout card">
                    <h2>Express Checkout</h2>
                    <div class="express-row">
                        <!--Apple Pay-->
                        <a href="#" class="express-btn">
                            <img src="image/apple pay.svg" alt="Checkout with Apple Pay" class="payment-icon">
                        </a>

                        <!--PayPal-->
                        <a href="#" class="express-btn">
                            <img src="image/paypal.svg" alt="Pay with PayPal" class="payment-icon">
                        </a>
                    </div>
                    
                </div>
                <!--分隔线 OR-->
                <div class="divider-with-or">
                    <span>or</span>
                </div>

                <!--Shipping Information-->
                <div class="shipping-info card">
                    <h2>Shipping Information</h2>
                    <form class="shipping-form">
                        
                        <div class="input-with-history">
                            <label for="first-name">First name</label>
                            <input type="text" id="first-name" placeholder="" autocomplete="off"/>

                            <div id="history-card" class="history-card flex-row hidden">
                                <img src="image/user.png" alt="User Avatar" class="card-avatar" />
                                <div class="card-info">
                                    <p class="card-name">Sophia Williams</p>
                                    <p class="card-desc">0412 345 678</p>
                                </div>
                            </div>
                        </div>
                

                        <label for="last-name">Last name</label>
                        <input type="text" id="last-name" placeholder="" />

                        <label for="phone">Phone number</label>
                        <input type="text" id="phone" placeholder="" />

                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="" />

                        <label for="address1">Address line 1</label>
                        <input type="text" id="address1" placeholder="" />

                        <label for="address2">Address line 2</label>
                        <input type="text" id="address2" placeholder="" />

                        <div class="row-two-fields">
                            <div class="half-width">
                                <label for="suburb">Suburb</label>
                                <input type="text" id="suburb" placeholder="" />
                            </div>

                            <div class="half-width">
                                <label for="country">Country</label>
                                <input type="text" id="country" placeholder="" />
                            </div>
                        </div>

                        <div class="row-two-fields">
                            <div class="half-width">
                                <label for="state">State</label>
                                <input type="text" id="state" placeholder="" />
                            </div>

                            <div class="half-width">
                                <label for="postcode">Postcode</label>
                                <input type="text" id="postcode" placeholder="" />
                            </div>
                        </div>
                    </form>
                </div>
                <hr class="section-divider" />
                <!--Payment Method-->
                <div class="payment-methods-row">
                    <!--Credit Debit Card-->
                    <div class="payment-method card">
                    
                        <div class="payment-header">
                            <h2>Pay with Credit / Debit Card</h2>
                            <div class="logo-group">
                                <img src="image/Visa_Inc._logo.svg.webp" alt="Visa" class="pay-logo">
                                <img src="image/MasterCard_Logo.svg.png" alt="Mastercard" class="pay-logo">
                            </div>
                        </div>

                        
                        <form class="card-form shipping-form">
                            <div class="input-with-history">
                                <label for="card-name">Cardholder Name</label>
                                <input type="text" id="card-name" placeholder="" autocomplete="off"/>
                                <div id="card-history" class="card-history-card hidden">
                                    <img src="image/mastercard-logo.png" alt="Mastercard" class="card-logo" />
                                    <div class="card-history-info">
                                        <p class="card-digits">•••• 1234</p>
                                        <p class="card-expiry">Expiry: 08/27</p>
                                    </div>
                                </div>
                            </div>
                            
                            <label for="card-number">Card Number</label>
                            <input type="text" id="card-number" placeholder="" />

                            <div class="card-details-row">
                                <div>
                                    <label for="expiry">Expiry Date</label>
                                    <input type="text" id="expiry" placeholder="" />
                                </div>
                                <div>
                                    <label for="cvv">CVV</label>
                                    <input type="text" id="cvv" placeholder="" />
                                </div>
                            </div>
                            <div class="security-note" id="security-note">
                                <img src="image/lock.svg" alt="Secure" class="lock-icon" />
                                <span>Secure payment powered by 256-bit SSL encryption</span>
                            </div>
                            <div class="mobile-checkout-footer">
                                <button class="mobile-checkout-btn" type="button">Checkout Now</button>
                            </div>
                        </form>
                        
                    </div>
                </div>


            </section>

        
        
        
            <!--右侧-->
            <section class="order-summary">
                <div class="summary-body">
                    <h2>Order Summary</h2>

                    <div class="order-item">
                        <img src="image/Kogan 55 LED 4K Smart Roku TV - R95T.webp" alt="TV" class="item-thumbnail">
                        <div class="item-details">
                            <p class="item-name">Kogan 55” LED 4K Smart Roku TV - R95T</p>
                            <p class="item-qty">Qty: 1</p>
                        </div>
                        <div class="item-price">$419</div>
                    </div>

                    <div class="order-item">
                        <img src="image/add_to_cart_1.webp" alt="Soundbar" class="item-thumbnail">
                        <div class="item-details">
                            <p class="item-name">2.1 Channel 100W Dolby Atmos Soundbar</p>
                            <p class="item-qty">Qty: 1</p>
                        </div>
                        <div class="item-price">$119</div>
                    </div>


                    <hr class="divider" />

                    <div class="price-line">
                        <span>Subtotal</span>
                        <span>$538</span>
                    </div>
                    <div class="price-line">
                        <span>Discount</span>
                        <span>-$0</span>
                    </div>
                    <div class="price-line">
                        <span>Shipping</span>
                        <span>$60</span>
                    </div>

                    <hr class="divider" />

                    <div class="total-line">
                        <strong>Total</strong>
                        <strong>$598</strong>
                    </div>
                </div>
                
                <div class="order-footer">
                    <button class="checkout-btn" type="button">Checkout Now</button>
                </div>
                
            </section>
        </div>
    </div>
    <!--footer-->
    <footer class="site-footer">
        <div class="footer-columns">
            <!--Logo-->
            <div class="footer-logo">
                <img src="image/Kogan.com_logo橙黑.png" alt="Kogan Logo" />
            </div>

            <!--1-->
            <div class="footer-col">
                <h4>Customer Service</h4>
                <ul>
                    <li><a href="#">Help Center / FAQ</a></li>
                    <li><a href="#">Shipping & Delivery</a></li>
                    <li><a href="#">Returns & Refunds</a></li>
                    <li><a href="#">Order Tracking</a></li>
                    <li><a href="#">Payment Methods</a></li>
                    <li><a href="#">Warranty & Support</a></li>
                </ul>
            </div>

            <!--2-->
            <div class="footer-col">
                <h4>Company Info</h4>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Press / Media</a></li>
                    <li><a href="#">Affiliate Program</a></li>
                    <li><a href="#">Blog / Newsroom</a></li>
                </ul>
            </div>

            <!--3-->
            <div class="footer-col">
                <h4>Legal</h4>
                <ul>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Cookie Settings</a></li>
                    <li><a href="#">Accessibility</a></li>
                </ul>
            </div>

            <!--4-->
            <div class="footer-col">
                <h4>Top Brand</h4>
                <ul>
                    <li><a href="#">Kogan</a></li>
                    <li><a href="#">Apple</a></li>
                    <li><a href="#">Samsung</a></li>
                    <li><a href="#">Google</a></li>
                    <li><a href="#">Ovela</a></li>
                    <li><a href="#">Dyson</a></li>
                    <li><a href="#">Fortis</a></li>
                </ul>
            </div>
        </div>

        <!--social media logo-->
        <div class="footer-bottom">
            <div class="social-icons">
                <a href="#"><img src="image/Facebook.png" alt="Facebook" /></a>
                <a href="#"><img src="image/Instagram.png" alt="Instagram" /></a>
                <a href="#"><img src="image/Youtube.png" alt="YouTube" /></a>
                <a href="#"><img src="image/Twitter.png" alt="Twitter" /></a>
            </div>
            <p class="copyright">&copy; 2025 Kogan.com.au. All rights reserved.</p>
        </div>

    </footer>
</body>
<script>
//order summary更新信息
document.addEventListener('DOMContentLoaded', () => {
  const checkoutBtn = document.getElementById('checkout-btn');

  if (checkoutBtn) {
    checkoutBtn.addEventListener('click', () => {
      const cartItems = [
        {
          name: 'Kogan 55” 4K TV',
          qty: 1,
          price: 599,
          image: 'image/tv-thumbnail.webp'
        }
      ];

      const carePrice = 79;

      localStorage.setItem('cartItems', JSON.stringify(cartItems));
      localStorage.setItem('carePrice', String(carePrice));

      setTimeout(() => {
        window.location.href = 'payment.html';
      }, 100);
    });
  }
});

// 更新 Order Summary
window.addEventListener("DOMContentLoaded", () => {
  const rawItems = JSON.parse(localStorage.getItem("cartItems") || "[]");

  const items = [];
  rawItems.forEach(item => {
    const existing = items.find(i => i.name === item.name);
    if (existing) {
      existing.qty += item.qty;
      existing.price += item.price; 
    } else {
      items.push({ ...item });
    }
  });

  const carePrice = parseInt(localStorage.getItem("carePrice") || "0");

  const orderSection = document.querySelector(".order-summary");

  if (!orderSection) return; 

  if (items.length === 0) {
    orderSection.innerHTML = `<p>Your cart is empty.</p>`;
    return;
  }

  const itemsHTML = items.map(item => `
    <div class="order-item">
      <img src="${item.image}" alt="${item.name}" class="item-thumbnail">
      <div class="item-details">
        <p class="item-name">${item.name}</p>
        <p class="item-qty">Qty: ${item.qty}</p>
      </div>
      <div class="item-price">$${item.price * item.qty}</div>
    </div>
  `).join("");

  const subtotal = items.reduce((sum, item) => sum + item.price * item.qty, 0);
  const shipping = 60;
  const total = subtotal + shipping + carePrice;

  orderSection.innerHTML = `
    <div class="summary-body">
      <h2>Order Summary</h2>

      ${itemsHTML}

      ${carePrice > 0 ? `
        <div class="order-item">
          <div class="item-details">
            <p class="item-name">Extended Warranty</p>
            <p class="item-qty">Included</p>
          </div>
          <div class="item-price">$${carePrice}</div>
        </div>
      ` : ""}

      <hr class="divider" />

      <div class="price-line">
        <span>Subtotal</span>
        <span>$${subtotal}</span>
      </div>

      <div class="price-line">
        <span>Shipping</span>
        <span>$${shipping}</span>
      </div>

      ${carePrice > 0 ? `
        <div class="price-line">
          <span>Extended Care</span>
          <span>$${carePrice}</span>
        </div>
      ` : ""}

      <div class="price-line">
        <span>Discount</span>
        <span>-$0</span>
      </div>

      <hr class="divider" />

      <div class="total-line">
        <strong>Total</strong>
        <strong>$${total}</strong>
      </div>
    </div>

    <div class="order-footer desktop-only">
      <button class="checkout-btn" type="button">Checkout Now</button>
    </div>
  `;
});


// Shipping info 自动输入
const savedProfile = {
  firstName: "Sophia",
  lastName: "Williams",
  phone: "0412 345 678",
  email: "SophiaW@gmail.com",
  address1: "22 Greenview Avenue",
  address2: "Unit 5B",
  suburb: "Richmond",
  country: "Australia",
  state: "VIC",
  postcode: "3000"
};

const firstNameInput = document.getElementById('first-name');
const historyCard = document.getElementById('history-card');

firstNameInput.addEventListener('click', (e) => {
  historyCard.classList.remove('hidden');
  setTimeout(() => historyCard.classList.add('show'), 10);
  e.stopPropagation();
});

historyCard.addEventListener('click', () => {
  const fields = [
    ['first-name', savedProfile.firstName],
    ['last-name', savedProfile.lastName],
    ['phone', savedProfile.phone],
    ['email', savedProfile.email],
    ['address1', savedProfile.address1],
    ['address2', savedProfile.address2],
    ['suburb', savedProfile.suburb],
    ['country', savedProfile.country],
    ['state', savedProfile.state],
    ['postcode', savedProfile.postcode]
  ];

  fields.forEach(([id, value]) => {
    const input = document.getElementById(id);
    input.value = value;
    input.classList.remove('autofill-animate');
    void input.offsetWidth;
    input.classList.add('autofill-animate');
  });

  historyCard.classList.remove('show');
  setTimeout(() => historyCard.classList.add('hidden'), 250);
});

document.addEventListener('click', (e) => {
  if (!firstNameInput.contains(e.target) && !historyCard.contains(e.target)) {
    historyCard.classList.remove('show');
    setTimeout(() => historyCard.classList.add('hidden'), 250);
  }
});

// Card Info 自动输入
const savedCard = {
  name: "Sophia Williams",
  number: "4111 1111 1111 1234",
  expiry: "08/27",
  cvv: "123"
};

const cardNameInput = document.getElementById('card-name');
const cardNumberInput = document.getElementById('card-number');
const expiryInput = document.getElementById('expiry');
const cvvInput = document.getElementById('cvv');
const cardHistory = document.getElementById('card-history');
const securityNote = document.getElementById('security-note');

function checkCardNumberForSecurityNote() {
  const value = cardNumberInput.value.replace(/\s/g, '');
  if (value.length >= 16) {
    securityNote.classList.add('show');
  } else {
    securityNote.classList.remove('show');
  }
}

cardNumberInput.addEventListener('input', checkCardNumberForSecurityNote);

cardNameInput.addEventListener('click', (e) => {
  cardHistory.classList.remove('hidden');
  setTimeout(() => cardHistory.classList.add('show'), 10);
  e.stopPropagation();
});

cardHistory.addEventListener('click', () => {
  const cardFields = [
    [cardNameInput, savedCard.name],
    [cardNumberInput, savedCard.number],
    [expiryInput, savedCard.expiry],
    [cvvInput, savedCard.cvv]
  ];

  cardFields.forEach(([input, value]) => {
    input.value = value;
    input.classList.remove('autofill-animate');
    void input.offsetWidth;
    input.classList.add('autofill-animate');
  });

  cardHistory.classList.remove('show');
  setTimeout(() => cardHistory.classList.add('hidden'), 250);

  checkCardNumberForSecurityNote();
});

document.addEventListener('click', (e) => {
  if (!cardNameInput.contains(e.target) && !cardHistory.contains(e.target)) {
    cardHistory.classList.remove('show');
    setTimeout(() => cardHistory.classList.add('hidden'), 250);
  }
});

//checkout now按钮跳转下一个页面
window.addEventListener("DOMContentLoaded", () => {
  function validateAndProceed(button) {
    const inputs = document.querySelectorAll('.shipping-form input');
    let valid = true;

    inputs.forEach(input => {
      if (input.value.trim() === '') {
        input.style.border = '1px solid red';
        valid = false;
      } else {
        input.style.border = '';
      }
    });

    if (!valid) {
      alert('Please fill in all required fields.');
      return;
    }

    button.disabled = true;
    button.textContent = "Processing...";

    setTimeout(() => {
      window.location.href = 'confirm.html';
    }, 500);
  }

  const desktopBtn = document.querySelector('.checkout-btn');
  if (desktopBtn) {
    desktopBtn.addEventListener('click', () => validateAndProceed(desktopBtn));
  }

  const mobileBtn = document.querySelector('.mobile-checkout-btn');
  if (mobileBtn) {
    mobileBtn.addEventListener('click', () => validateAndProceed(mobileBtn));
  }
});


</script>
</html>